import React, { useState } from 'react';
import { Link, useHistory } from 'react-router-dom';

import Menu from './menu/Menu';
import MenuButton from './menu/MenuButton';

const Header = () => {
    let history = useHistory();    

    const [logoClass, setLogoClass] = useState('');
    const [menuClass, setMenuClass] = useState('');
    const [buttonClass, setButtonClass] = useState('');

    document.addEventListener('keydown', function (e) {
        if ( e.key === 'Escape' ) {
            setMenuClass('');
            setLogoClass('menu-closed');
            setButtonClass('');
        }
    });  

    const menuButtonClick = () => {
        logoClass !== 'menu-opened' ? setLogoClass('menu-opened') : setLogoClass('menu-closed');
        menuClass !== 'menu-active' ? setMenuClass('menu-active') : setMenuClass('');
        buttonClass !== 'menu-button-clicked' ? setButtonClass('menu-button-clicked') : setButtonClass('');        
    }

    const menuClick = (e) => {
        if (e.target.localName === 'a' || e.target.localName === 'svg' ) {
            setMenuClass('');
            setButtonClass('');
            setLogoClass('menu-closed');            
        }
    }    

    const logoClick = () => {
        if (menuClass === 'menu-active') {
            setMenuClass('');
            setButtonClass('');
            setLogoClass('menu-closed');
            history.push('/home');
        }
    }

    if (menuClass === 'menu-active') {
        document.body.style.overflow = 'hidden'
    }   else {
        document.body.style.overflow = null
    }

    return (
        <>
        <header>                      
            <div className='header-left-box'>                
                <Link to='/'>
                    <svg onClick={logoClick} className={logoClass} xmlns="http://www.w3.org/2000/svg" width="179" height="26" viewBox="0 0 5226.55 710.5">                   <g id="Layer_2" data-name="Layer 2">
                            <g id="Layer_1-2" data-name="Layer 1">
                                <g>
                                    <path d="M2197.85,346.61a13.66,13.66,0,0,0-12.49-12.49,2652.29,2652.29,0,0,0-310,1.88c-3.18.21-6.73,2.71-6.73,6.5,0,52,6,108.55,6.41,160.69a7.93,7.93,0,0,1-8,8h-28.62c-51.7,0-94.18-15.28-94.18-153.4,0-137.71,35.1-152.63,85-152.63h322.28a7.89,7.89,0,0,0,7.7-6.28l35.6-168.18a8,8,0,0,0-7-9.59C2073.31,9.62,1967,2.27,1866.16,2.27c-312,0-507.76,82.91-507.76,355.49,0,289.83,193.87,350.47,504.06,350.47,59.19,0,105.94-1.53,150.82-4.49q86.15-4.44,173-13.9a13.49,13.49,0,0,0,12.48-12.42A3032.06,3032.06,0,0,0,2197.85,346.61Z"></path>
                                    <path d="M4824.88,1.43c74.73,0,134.34,8,206.72,18.85a5.72,5.72,0,0,1,4.76,6.81l-37.59,171.6a5.65,5.65,0,0,1-5.75,4.44l-167.79-6.93c-68.07-2.81-123.56,23.53-123.56,161.57,0,138.45,48.12,165.07,123.56,162L4993,512.8a5.64,5.64,0,0,1,5.77,4.49l35.81,172.92a5.74,5.74,0,0,1-5,6.79c-73.07,8.27-133.35,12.07-208.4,12.07-313.57,0-509.55-60.79-509.55-351.3C4311.59,84.53,4509.44,1.43,4824.88,1.43Z"></path>
                                    <path d="M2607.9,705.78a2937.59,2937.59,0,0,1-332.83,0,20.28,20.28,0,0,1-18.62-18.52,5653.39,5653.39,0,0,1,0-664,20.27,20.27,0,0,1,18.62-18.52,2937.59,2937.59,0,0,1,332.83,0,20.24,20.24,0,0,1,18.62,18.52,5649.05,5649.05,0,0,1,0,664A20.29,20.29,0,0,1,2607.9,705.78Z"></path>
                                    <path d="M1283.44,705.2a2932.73,2932.73,0,0,1-332.29,0,20.24,20.24,0,0,1-18.58-18.49,5647.86,5647.86,0,0,1,0-662.93A20.26,20.26,0,0,1,951.15,5.29a2932.73,2932.73,0,0,1,332.29,0A20.23,20.23,0,0,1,1302,23.78a5647.86,5647.86,0,0,1,0,662.93A20.23,20.23,0,0,1,1283.44,705.2Z"></path>
                                    <path d="M368.45,2.27C282.94,2.27,177,7.56,73.15,16.16c-15.31,1.05-30.62,2.32-45.92,4C16,21.45,9.85,28.64,9.29,38a5485.06,5485.06,0,0,0,0,638.29c.56,9.36,6,17.44,15.34,18,2.26.12,4.54.16,6.8.29,125.72,6.88,240.38,13.66,340.71,13.66,310.19,0,504.06-60.64,504.06-350.47C876.2,85.18,680.49,2.27,368.45,2.27Zm36.57,509H381.76a8.58,8.58,0,0,1-8.54-8.32c-1.56-45.5-2.92-91.6-2.92-144.76s1.55-99.79,3.23-145.17a8.56,8.56,0,0,1,8.54-8.28H405c50.19,0,85.3,15.36,85.3,153.07C490.32,495.88,455.21,511.22,405,511.22Z"></path>
                                    <path d="M3509.58,28.14a15.76,15.76,0,0,0-14.48-14.55,6582.36,6582.36,0,0,0-797,0,15.76,15.76,0,0,0-14.48,14.55q-3.89,82.14,0,164.37a15.75,15.75,0,0,0,14.48,14.55q103.2,6.24,206.07,9.21-6.27,234.87,7.43,469.71a20,20,0,0,0,18.36,18.27,2936.92,2936.92,0,0,0,333.32,0A20,20,0,0,0,3281.6,686q13.79-234.63,7.43-469.71,102.9-3,206.07-9.21a15.76,15.76,0,0,0,14.48-14.55Q3513.47,110.37,3509.58,28.14Z"></path>
                                    <path d="M4300.49,549.61a18,18,0,0,0-17.06-16.74q-167.57-5-334.6-4.31a4.81,4.81,0,0,1-4.91-4.93c.61-22.1,1.06-50.81,1.43-72.87a4.79,4.79,0,0,1,4.86-4.71c76.69-.43,153.4-1.56,230.26-3.84a17.19,17.19,0,0,0,16.26-16,1283.63,1283.63,0,0,0,0-128.79,17.17,17.17,0,0,0-16.24-16c-76.75-2.28-153.36-3.41-229.94-3.84a5,5,0,0,1-4.87-4.92c-.54-31.82-1-53.51-1.74-81.19a5,5,0,0,1,4.9-5.1q167.19.48,334.59-4.31a18,18,0,0,0,17.07-16.67q3.45-71.5,0-143.1A18,18,0,0,0,4283.42,5.7Q4064.86-.79,3847,2.13c-87.17-2.84-174.08-1.93-261.45,3A20.26,20.26,0,0,0,3567,23.64a5649.8,5649.8,0,0,0-.25,658.82c.69,12,11.16,22.47,23.18,23.13,85.91,4.73,171.4,5.56,257.13,2.78q218.17,2.77,436.41-3.57a18,18,0,0,0,17.06-16.74C4302.79,640.69,4302.79,597,4300.49,549.61Z"></path>
                                    <path d="M5100.29,43.59h-22.63V30.73H5137V43.59h-22.63V104.1h-14.05Zm52.41-12.86h15l22.15,34.78L5212,30.73h14.53V104.1H5213V51.93l-22.63,35h-1.43l-22.63-35V104.1H5152.7Z"></path>
                                </g>
                            </g>
                        </g>
                    </svg>  
                </Link>                        
            </div>
            <div className='header-right-box'>
                <MenuButton onClick={menuButtonClick} class={buttonClass} />
            </div>            
        </header>        
        <Menu onClick={menuClick} class={`${menuClass}`} />  
        </>
    );
};

export default Header;